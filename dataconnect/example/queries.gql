# ===================================================================
# Query Examples for Grade Web App
# Ejemplos de queries para el sistema de gestión de calificaciones
# Enfocado en lectura de Asignaturas, Unidades y Temas
# ===================================================================

# ===================================================================
# USUARIOS (Users)
# ===================================================================

# Obtener usuario por email
query GetUserByEmail($email: String!) @auth(level: USER) {
  users(where: {email: {eq: $email}}) {
    userId
    name
    email
    role
    createdAt
    updatedAt
    updatedBy
    deletedAt
  }
}

# ===================================================================
# ASIGNATURAS (Subjects)
# ===================================================================

# Listar todas las asignaturas
query ListSubjects @auth(level: USER) {
  subjects {
    subjectId
    name
    code
    active
    createdAt
  }
}

# Obtener una asignatura por ID
query GetSubject($subjectId: UUID!) @auth(level: USER) {
  subject(key: { subjectId: $subjectId }) {
    subjectId
    name
    code
    active
    createdAt
    createdBy
    updatedAt
    updatedBy
    deletedAt
    deletedBy
  }
}

# ===================================================================
# UNIDADES (Units)
# ===================================================================

# Listar todas las unidades
query ListUnits @auth(level: USER) {
  units {
    unitId
    name
    subjectId
    active
    createdAt
  }
}

# Obtener una unidad por ID
query GetUnit($unitId: UUID!) @auth(level: USER) {
  unit(key: { unitId: $unitId }) {
    unitId
    name
    subjectId
    active
    createdAt
    createdBy
    updatedAt
    updatedBy
    deletedAt
    deletedBy
  }
}

# ===================================================================
# TEMAS (Topics)
# ===================================================================

# Listar todos los temas
query ListTopics @auth(level: USER) {
  topics {
    topicId
    name
    unitId
    active
    createdAt
  }
}

# Obtener un tema por ID
query GetTopic($topicId: UUID!) @auth(level: USER) {
  topic(key: { topicId: $topicId }) {
    topicId
    name
    unitId
    active
    createdAt
    createdBy
    updatedAt
    updatedBy
    deletedAt
    deletedBy
  }
}

# ===================================================================
# CATEGORÍAS DE NIVELES (Level Categories)
# ===================================================================

# Listar todas las categorías de niveles
query ListLevelCategories @auth(level: USER) {
  levelCategories {
    categoryId
    code
    name
    description
    active
    createdAt
  }
}

# Obtener una categoría de nivel por ID
query GetLevelCategory($categoryId: UUID!) @auth(level: USER) {
  levelCategory(key: { categoryId: $categoryId }) {
    categoryId
    code
    name
    description
    active
    createdAt
    createdBy
    updatedAt
    updatedBy
    deletedAt
    deletedBy
  }
}

# ===================================================================
# NIVELES EDUCACIONALES (Educational Levels)
# ===================================================================

# Listar todos los niveles educacionales
query ListEducationalLevels @auth(level: USER) {
  educationalLevels {
    levelId
    categoryId
    code
    name
    description
    active
    createdAt
  }
}

# Obtener un nivel educacional por ID
query GetEducationalLevel($levelId: UUID!) @auth(level: USER) {
  educationalLevel(key: { levelId: $levelId }) {
    levelId
    categoryId
    code
    name
    description
    active
    createdAt
    createdBy
    updatedAt
    updatedBy
    deletedAt
    deletedBy
  }
}

# Obtener todos los niveles de una categoría específica
query GetLevelsByCategory($categoryId: UUID!) @auth(level: USER) {
  educationalLevels(where: { categoryId: { eq: $categoryId } }) {
    levelId
    code
    name
    description
    active
    createdAt
  }
}

# ===================================================================
# CURSOS (Courses)
# ===================================================================

# Listar todos los cursos del usuario autenticado
query ListCourses($userId: UUID!) @auth(expr: "userId == auth.uid") {
  courses(where: { userId: { eq: $userId } }) {
    courseId
    name
    code
    levelId
    userId
    active
    createdAt
  }
}

# Obtener un curso por ID (solo si pertenece al usuario autenticado)
query GetCourse($courseId: UUID!, $userId: UUID!) @auth(expr: "userId == auth.uid") {
  course(key: { courseId: $courseId }) {
    courseId
    name
    code
    levelId
    userId
    active
    createdAt
    createdBy
    updatedAt
    updatedBy
    deletedAt
    deletedBy
  }
}

# Obtener cursos por usuario (solo para el usuario autenticado)
query GetCoursesByUser($userId: UUID!) @auth(expr: "userId == auth.uid") {
  courses(where: { userId: { eq: $userId } }) {
    courseId
    name
    code
    levelId
    userId
    active
    createdAt
  }
}

# Obtener cursos por nivel educacional del usuario autenticado
query GetCoursesByLevel($userId: UUID!, $levelId: UUID!) @auth(expr: "userId == auth.uid") {
  courses(where: { userId: { eq: $userId }, levelId: { eq: $levelId } }) {
    courseId
    name
    code
    levelId
    userId
    active
    createdAt
  }
}

